<!DOCTYPE html>
<html lang="ja">
    <head>
        <meta charset="UTF-8">
        <title>Linuxコマンドの使い方【上級編】</title>
        <meta name="description" content="Linuxコマンドの使い方【上級編】">
        <meta name="viewport" content="width=device-width,initial-scale=1">

    <!-- CSS -->
        <link rel="stylesheet" href="https://unpkg.com/ress@3.0.0/dist/ress.min.css">
        <link rel="stylesheet" href="../css/style.css">
    <!-- JQuery -->
    <script src="https://code.jquery.com/jquery-3.2.1.js" integrity="sha256-DZAnKJ/6XZ9si04Hgrsxu/8s717jcIzLy3oi35EouyE=" crossorigin="anonymous"></script>
    <script src="../js/menu.js" type="text/javascript"></script>
    <script src="../js/footer.js" type="text/javascript"></script>
    </head>

<body>
    <div class="page-contents">
        <!-- Accordion Menu -->
        <script type="text/javascript">loadMenu('../');</script>
        <!-- MAIN CONTENTS -->
        <div class="main-contents">
            <!-- HEADER IMAGE -->
            <div id="linux-bg" class="big-bg">
                <div class="title-contents wrapper">
                    <h2 class="page-title">Linux</h2>
                </div>
            </div>

            <!-- CONTENTS -->
            <div class="main-text wrapper">
                <div class="hierarchie">
                    <a href="../index.html"><img class="home-icon" src="../images/logo_original.png" alt="home"></a>
                    <p> ＞ <a href="linux_command_top.html">Linixコマンド</a> ＞ Linuxコマンド【上級編】</p>
                </div>
                <div>
                    <h2 class="content-title">Linuxコマンド【上級編】</h2>
                    <p>
                        Linuxコマンド上級編は、主にPCスペックの確認やハードディスクに関するものをまとめた。
                        普段の研究では使用しないだろうが、PCのメンテナンス時には便利なものが多いと思う。
                    </p>
                    <table>
                        <tr>
                            <th>コマンド</th>
                            <th>説明</th>
                        </tr>
                        <tr>
                            <td>lscpu</td>
                            <td>CPUの情報を表示</td>
                        </tr>
                        <tr>
                            <td>top</td>
                            <td>実行中のプロセスの状態を表示</td>
                        </tr>
                        <tr>
                            <td>free</td>
                            <td>メモリの空き容量や使用量を表示</td>
                        </tr>
                        <tr>
                            <td>lshw</td>
                            <td>ハードウェアの情報を表示</td>
                        </tr>
                        <tr>
                            <td>df</td>
                            <td>ディスクの空き容量を表示</td>
                        </tr>
                        <tr>
                            <td>fdisk</td>
                            <td>パーテーションを作成・削除</td>
                        </tr>
                        <tr>
                            <td>mkfs</td>
                            <td>ディスクのフォーマットを実行</td>
                        </tr>
                        <tr>
                            <td>mount</td>
                            <td>デバイスのマウントを実行</td>
                        </tr>
                    </table>
                </div>

                <div class="content-block">
                    <h3>lscpu</h3>
                    <p>
                        <code>lscpu</code>はCPUの情報を表示するコマンドである。
                        CPUの種類やコア数などを確認できる。
                        <code>cat /proc/cpuinfo</code>や<code>lshw -class cpu</code>でも同様の操作が可能。
                    </p>
                </div>

                <div class="content-block">
                    <h3>top</h3>
                    <p>
                        <code>top</code>は実行中のプロセスの状態を表示するコマンドである。
                        PID（プロセスID）やユーザー名、CPU使用率、メモリ使用率などが確認できる。
                        <code>q</code>か<code>Ctrl + C</code>で終了する。
                    </p>
                    <table>
                        <tr>
                            <th>topオプション</th>
                            <th>説明</th>
                        </tr>
                        <tr>
                            <td>-n</td>
                            <td>指定回数だけ表示した後、コマンドを自動で終了する。</td>
                        </tr>
                        <tr>
                            <td>-u</td>
                            <td>指定したユーザーのプロセス状態を確認する。</td>
                        </tr>
                        <tr>
                            <td>-d</td>
                            <td>指定した間隔（秒）でプロセス状態を表示する。</td>
                        </tr>
                    </table>
                    <p>
                        特定のプロセスのみを表示したい場合は<code>grep</code>と組み合わせるとよい。
                    </p>
                </div>
                
                <div class="content-block">
                    <h3>free</h3>
                    <p>
                        <code>free</code>はメモリの空き容量や使用量を表示するコマンドである。
                        <code>-t</code>をつけるとメモリとスワップ領域の合計を表示する。
                    </p>
                    <table>
                        <tr>
                            <th>freeオプション</th>
                            <th>説明</th>
                        </tr>
                        <tr>
                            <td>-b</td>
                            <td>メモリ容量をバイト単位で表示</td>
                        </tr>
                        <tr>
                            <td>-k</td>
                            <td>メモリ容量をキロバイト単位で表示</td>
                        </tr>
                        <tr>
                            <td>-m</td>
                            <td>メモリ容量をメガバイト単位で表示</td>
                        </tr>
                        <tr>
                            <td>-g</td>
                            <td>メモリ容量をギガバイト単位で表示</td>
                        </tr>
                    </table>
                </div>

                <div class="content-block">
                    <h3>lshw</h3>
                    <p>
                        <code>lshw</code>はハードウェアの情報を表示するコマンドである。
                        そのままでは全ての情報を表示するが、オプションをつけることによって便利に利用できる。
                    </p>
                    <table>
                        <tr>
                            <th>lshwオプション</th>
                            <th>説明</th>
                        </tr>
                        <tr>
                            <td>-class</td>
                            <td>表示するクラスを指定する。<code>-class cpu</code>や<code>-class memory</code>などが指定できる。</td>
                        </tr>
                        <tr>
                            <td>-short</td>
                            <td>概要を短縮表示する。</td>
                        </tr>
                        <tr>
                            <td>-html</td>
                            <td>HTML形式で表示する。</td>
                        </tr>
                    </table>                
                </div>

                <div class="content-block">
                    <h3>df</h3>
                    <p>
                        <code>df</code>はディスクの空き容量を表示するコマンドである。
                        マウントされているハードディスクの空き容量、使用率、マウント先などを確認できる。
                        オプションは<code>df -Th</code>とすると便利。
                    </p>
                    <table>
                        <tr>
                            <th>dfオプション</th>
                            <th>説明</th>
                        </tr>
                        <tr>
                            <td>-T</td>
                            <td>各ファイルシステムの種類を併せて表示する。</td>
                        </tr>
                        <tr>
                            <td>-h</td>
                            <td>サイズに応じて読みやすい単位で表示する。</td>
                        </tr>
                        <tr>
                            <td>--total</td>
                            <td>空き領域の合計も併せて表示する。</td>
                        </tr>
                    </table>
                </div>

                <div class="content-block">
                    <h3>fdisk</h3>
                    <p>
                        <code>fdisk</code>はパーテーションの作成や削除を行うコマンドである。
                        パーテーションはハードディスクの領域を分けるものであり、それぞれの領域にsda1やsda2のような名前が付けられる。
                    </p>
                    <h4>fdisk -l</h4>
                    <p>
                        <code>-l</code>をつけると、/proc/partitionsに書かれているパーテーション情報を表示する。
                        デバイス名を指定することで、限定的に表示することも可能。
                    </p>
                    <h4>fdisk デバイス名</h4>
                    <p>
                        <code>fdisk デバイス名</code>とすると、対話形式でパーテーションの作成・削除ができる。
                        アルファベット1文字で次のような操作が可能。
                    </p>
                    <table>
                        <tr>
                            <th>fdisk操作</th>
                            <th>説明</th>
                        </tr>
                        <tr>
                            <td>m</td>
                            <td>対話モードコマンドの一覧を表示する。</td>
                        </tr>
                        <tr>
                            <td>p</td>
                            <td>パーテーションテーブルを表示する。パーテーション一覧とファイルシステムが確認できる。</td>
                        </tr>
                        <tr>
                            <td>n</td>
                            <td>パーテーションを新規作成する。基本は既定値に合わせて作成すればOK。</td>
                        </tr>
                        <tr>
                            <td>d</td>
                            <td>パーテーションを削除する。</td>
                        </tr>
                        <tr>
                            <td>w</td>
                            <td>パーテーションテーブルの変更を保存して終了する。</td>
                        </tr>
                        <tr>
                            <td>q</td>
                            <td>パーテーションテーブルの変更を保存せずに終了する。</td>
                        </tr>
                    </table>
                    <p>
                        なお、パーテーションを管理する方式はMBR（Master Boot Record）とGPT（GUID Pattition Table）があり、<code>fdisk</code>はMBRのみに対応している。
                        MBRは管理可能なパーテーションサイズが最大2TBであるので、より大きなパーテーションを利用する場合はGPTを選択する。
                        GPTは<code>gdisk</code>や<code>parted</code>などのコマンドで管理できる。
                    </p>
                </div>

                <div class="content-block">
                    <h3>mkfs</h3>
                    <p>
                        <code>mkfs</code>はディスクをフォーマットするコマンドである。
                        これを実行することでハードディスクなどのファイルシステムを構築し、Linuxで読み込みができるようになる。
                    </p>
                    <table>
                        <tr>
                            <th>mkfsオプション</th>
                            <th>説明</th>
                        </tr>
                        <tr>
                            <td>-t</td>
                            <td>ファイルシステムの種類を指定する。Linuxでは<code>xfs</code>や<code>ext4</code>が使える。</td>
                        </tr>
                        <tr>
                            <td>mkfs.xfs</td>
                            <td>xfsでファイルシステムを構築する。<code>-t xfs</code>でも呼び出される。</td>
                        </tr>
                        <tr>
                            <td>mkfs.ext4</td>
                            <td>ext4でファイルシステムを構築する。<code>-t ext4</code>でも呼び出される。</td>
                        </tr>
                    </table>
                </div>

                <div class="content-block">
                    <h3>mount</h3>
                    <p>
                        <code>mount</code>はディスクをマウントするコマンドである。
                        ディスクを指定した場所で使えるようにするコマンドであり、<code>mount デバイス名 マウント先</code>として使用する。
                        マウントしたディスクを取り外す場合は<code>umount</code>を使用する。
                    </p>
                    <br>
                    <p>
                        なお、PC起動時にディスクを自動マウントする方法もあり、/etc/fstabにUUIDを追加することで実現できる。
                        <br>
                        （この方法では起動時にディスクが物理的に接続されていないとGUIが起動しない）
                    </p>

                </div>
                
                <div class="hierarchie-bottom">
                    <a href="./linux_command2.html">PREVIOUS</a>
                    <a href="./linux_command_top.html">TOP</a>
                    <a href="./linux_command4.html">NEXT</a>
                </div>

            </div>
            <script type="text/javascript">loadFooter();</script>
        </div>
    </div>
</body>
</html>